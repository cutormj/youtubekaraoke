<html>
    <body>
        <script>
            let url = new URL(window.location.href);
            let params = new URLSearchParams(url.search);
            let songid = params.get('songId');
            console.log(songid);
// To update JSON file
            function readTextFile(file, callback) {
                var rawFile = new XMLHttpRequest();
                rawFile.overrideMimeType("application/json");
                rawFile.open("GET", file, true);
                rawFile.onreadystatechange = function() {
                    if (rawFile.readyState === 4 && rawFile.status == "200") {
                        callback(rawFile.responseText);
                    }
                }
                rawFile.send(null);
            }

            //usage:
            readTextFile("./queue.json", function(text){
                var data = JSON.parse(text);
                console.log(data);
            });



            const queue_array = JSON.parse(data);// Converting JSON to Array in javaScript
            queue_array.push(songid); //insert data to array
            //converting array back to JSON file
            fs.writeFileSync(name, JSON.stringify(queue_array)); 

            window.location.replace("https://cutormj.github.io/youtubekaraoke/remote.html");
        </script>
    </body>
</html>